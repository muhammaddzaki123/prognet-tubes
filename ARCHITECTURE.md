# Arsitektur System - Multiplayer Memory Game

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MULTIPLAYER MEMORY GAME                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENT 1       â”‚                            â”‚   CLIENT 2       â”‚
â”‚   (Host)         â”‚                            â”‚   (Guest)        â”‚
â”‚                  â”‚                            â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MainFrame  â”‚  â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚ MainFrame  â”‚  â”‚
â”‚  â”‚ (Swing GUI)â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  SERVER  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–ºâ”‚ (Swing GUI)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚          â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚         â”‚        â”‚ TCP:5000 â”‚        â”‚        â”‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚ UDP:5001 â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚GameClient  â”‚  â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚  â”‚GameClient  â”‚  â”‚
â”‚  â”‚  (Socket)  â”‚  â”‚             â”‚              â”‚  â”‚  (Socket)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    JSON Messages over TCP
```

## ğŸ”„ Communication Flow

### 1. Connection Phase

```
Client                          Server
  â”‚                              â”‚
  â”œâ”€â”€UDP Broadcastâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Discover server
  â”‚â—„â”€â”€â”€â”€â”€UDP Responseâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Return server IP
  â”‚                              â”‚
  â”œâ”€â”€TCP Connectâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Establish connection
  â”‚â—„â”€â”€â”€â”€â”€Acceptâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Create ClientHandler thread
  â”‚                              â”‚
```

### 2. Room Creation

```
Client 1 (Host)                Server                 Client 2 (Guest)
     â”‚                          â”‚                           â”‚
     â”œâ”€CREATE_ROOMâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
     â”‚   {playerName,gridSize}   â”‚ Generate room code        â”‚
     â”‚â—„â”€â”€â”€â”€ROOM_CREATEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Create Room object        â”‚
     â”‚   {roomCode: "123456"}    â”‚                           â”‚
     â”‚                          â”‚                           â”‚
     â”‚                          â”‚â—„â”€â”€â”€â”€â”€â”€JOIN_ROOMâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                          â”‚ {roomCode: "123456"}      â”‚
     â”‚â—„â”€â”€â”€â”€PLAYER_JOINEDâ”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºROOM_JOINEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                          â”‚                           â”‚
```

### 3. Game Start

```
Host                           Server                    Guest
 â”‚                              â”‚                          â”‚
 â”œâ”€START_GAMEâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Initialize cards        â”‚
 â”‚                              â”‚ Shuffle deck            â”‚
 â”‚â—„â”€â”€â”€â”€GAME_STARTEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºGAME_STARTEDâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚   {cards[], turn: 1}         â”‚                          â”‚
 â”‚                              â”‚                          â”‚
```

### 4. Gameplay Loop

```
Player 1                       Server                    Player 2
   â”‚                            â”‚                            â”‚
   â”œâ”€FLIP_CARD (id: 5)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Validate turn             â”‚
   â”‚â—„â”€â”€â”€â”€CARD_FLIPPEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºCARD_FLIPPEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                            â”‚                            â”‚
   â”œâ”€FLIP_CARD (id: 12)â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Check match              â”‚
   â”‚â—„â”€â”€â”€â”€MATCH_FOUNDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºMATCH_FOUNDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚   {score: 1, turn: 1}      â”‚   Continue turn           â”‚
   â”‚                            â”‚                            â”‚
   â”œâ”€FLIP_CARD (id: 3)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
   â”‚â—„â”€â”€â”€â”€CARD_FLIPPEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºCARD_FLIPPEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                            â”‚                            â”‚
   â”œâ”€FLIP_CARD (id: 8)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ No match                 â”‚
   â”‚â—„â”€â”€â”€â”€NO_MATCHâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºNO_MATCHâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚   {turn: 2}                â”‚   Switch to P2            â”‚
   â”‚                            â”‚                            â”‚
   â”‚                            â”‚â—„â”€â”€â”€â”€FLIP_CARDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚â—„â”€â”€â”€â”€CARD_FLIPPEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºCARD_FLIPPEDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                            â”‚                            â”‚
```

### 5. Game Over

```
Player                         Server                     Player
   â”‚                            â”‚                            â”‚
   â”œâ”€FLIP_CARD (last card)â”€â”€â”€â”€â”€â”€â–ºâ”‚ All cards matched         â”‚
   â”‚â—„â”€â”€â”€â”€GAME_OVERâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â–ºGAME_OVERâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚   {winner, scores}         â”‚                            â”‚
   â”‚                            â”‚                            â”‚
```

## ğŸ§µ Server Threading Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SERVER PROCESS                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Main Thread (GameServer.java)              â”‚  â”‚
â”‚  â”‚  - ServerSocket.accept() loop                        â”‚  â”‚
â”‚  â”‚  - Create ClientHandler for each connection          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          ExecutorService (Thread Pool)               â”‚  â”‚
â”‚  â”‚  Max: 100 threads                                    â”‚  â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚     â”‚        â”‚        â”‚        â”‚        â”‚                   â”‚
â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”             â”‚
â”‚  â”‚Clientâ”‚ â”‚Clientâ”‚ â”‚Clientâ”‚ â”‚Clientâ”‚ â”‚Clientâ”‚  ...        â”‚
â”‚  â”‚  H1  â”‚ â”‚  H2  â”‚ â”‚  H3  â”‚ â”‚  H4  â”‚ â”‚  H5  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      UDP Broadcast Thread (UDPBroadcastServer)       â”‚  â”‚
â”‚  â”‚  - Listen on port 5001                               â”‚  â”‚
â”‚  â”‚  - Respond to discovery requests                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      Cleanup Thread (Daemon)                         â”‚  â”‚
â”‚  â”‚  - Run every 60 seconds                              â”‚  â”‚
â”‚  â”‚  - Remove empty rooms                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Class Diagram - Server

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GameServer    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ - serverSocket  â”‚
â”‚ - roomManager   â”‚
â”‚ - threadPool    â”‚
â”‚ - udpServer     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ + start()       â”‚
â”‚ + shutdown()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ creates
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RoomManager  â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ - rooms      â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ + createRoom()â”‚
    â”‚ + getRoom()  â”‚
    â”‚ + cleanup()  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ manages
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Room     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ ClientHandlerâ”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ belongs â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ - roomCode   â”‚         â”‚ - socket     â”‚
    â”‚ - gameState  â”‚         â”‚ - room       â”‚
    â”‚ - host       â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ - guest      â”‚         â”‚ + run()      â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚ + handle*()  â”‚
    â”‚ + addPlayer()â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ + flipCard() â”‚
    â”‚ + broadcast()â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Class Diagram - Client

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MainFrame     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ - cardLayout    â”‚
â”‚ - gameClient    â”‚
â”‚ - screens[]     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ + showScreen()  â”‚
â”‚ + handleMsg()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ manages â”€â”€â”€â”€â”€â”
         â”‚                â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GameClient   â”‚  â”‚ GUI Screens  â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ - socket     â”‚  â”‚ - HomeScreen â”‚
    â”‚ - in/out     â”‚  â”‚ - CreateRoom â”‚
    â”‚ - handler    â”‚  â”‚ - JoinRoom   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ - WaitingRoomâ”‚
    â”‚ + connect()  â”‚  â”‚ - GameBoard  â”‚
    â”‚ + send*()    â”‚  â”‚ - GameResult â”‚
    â”‚ + receive()  â”‚  â”‚ - HowToPlay  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ® GUI Screen Navigation

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ HomeScreen  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚            â”‚            â”‚
         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ CreateRoomâ”‚ â”‚JoinRoomâ”‚  â”‚ HowToPlay  â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚            â”‚             â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
                   â”‚                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”             â”‚
            â”‚WaitingRoom  â”‚             â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
                   â”‚                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”             â”‚
            â”‚ GameBoard   â”‚             â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
                   â”‚                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”             â”‚
            â”‚ GameResult  â”‚             â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
                   â”‚                     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚ HomeScreen  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ Data Flow - Game State

```
Server-Side State (Authoritative)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Room Object              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      GameState            â”‚  â”‚
â”‚  â”‚  - roomCode               â”‚  â”‚
â”‚  â”‚  - player1/2 names        â”‚  â”‚
â”‚  â”‚  - player1/2 scores       â”‚  â”‚
â”‚  â”‚  - currentTurn            â”‚  â”‚
â”‚  â”‚  - cards[]                â”‚  â”‚
â”‚  â”‚    - id, animal, matched  â”‚  â”‚
â”‚  â”‚  - gameStarted            â”‚  â”‚
â”‚  â”‚  - gameOver               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ broadcast
          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   JSON     â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
   â”‚             â”‚
â”Œâ”€â”€â–¼â”€â”€â”       â”Œâ”€â”€â–¼â”€â”€â”
â”‚ C1  â”‚       â”‚ C2  â”‚
â””â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”˜
Client copies (read-only)
```

## ğŸ”’ Thread Safety

### Synchronized Operations

```java
// Room.java
public synchronized boolean addPlayer(...)
public synchronized void removePlayer(...)
public synchronized boolean flipCard(...)
public synchronized boolean checkMatch(...)

// RoomManager.java
public synchronized String createRoom(...)
public synchronized void removeRoom(...)
```

### UI Thread Safety

```java
// MainFrame.java - All UI updates via EDT
SwingUtilities.invokeLater(() -> {
    // Update GUI components
});
```

## ğŸ“Š Message Protocol

### Request-Response Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚              â”‚ Server â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚                       â”‚
    â”œâ”€â”€Request (Message)â”€â”€â”€â–ºâ”‚
    â”‚  {type, data}         â”‚
    â”‚                       â”œâ”€ Process
    â”‚                       â”œâ”€ Update state
    â”‚                       â”œâ”€ Broadcast
    â”‚â—„â”€â”€Response(s)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  {type, data}         â”‚
    â”‚                       â”‚
```

### Message Types Mapping

```
Client Action         â†’  Server Processing  â†’  Broadcast
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CREATE_ROOM          â†’  Generate code       â†’  ROOM_CREATED
JOIN_ROOM            â†’  Validate & add      â†’  ROOM_JOINED
                                               + PLAYER_JOINED
START_GAME           â†’  Initialize cards    â†’  GAME_STARTED
FLIP_CARD            â†’  Validate turn       â†’  CARD_FLIPPED
                     â†’  Check match         â†’  MATCH_FOUND/NO_MATCH
                     â†’  Check game over     â†’  GAME_OVER (if done)
DISCONNECT           â†’  Remove player       â†’  PLAYER_LEFT
```

## ğŸŒ Network Topology

```
Same Local Network (WiFi/LAN)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Router (192.168.1.1)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Server   â”‚       â”‚ Client 1 â”‚       â”‚  Client 2  â”‚
   â”‚ :5000    â”‚       â”‚ (Host)   â”‚       â”‚  (Guest)   â”‚
   â”‚ :5001    â”‚       â”‚          â”‚       â”‚            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UDP Broadcast: 255.255.255.255:5001
  â†’ All devices receive discovery request
  â†’ Server responds with its IP
  â†’ Clients connect via TCP to server IP:5000
```

## ğŸ“ˆ Scalability Considerations

**Current Design:**

- Max 100 concurrent connections (thread pool)
- 1 room = 2 players only
- In-memory state (no persistence)
- Single server instance

**To Scale:**

- Use connection pooling
- Implement room persistence (database)
- Add load balancer for multiple servers
- Use message queue for inter-server communication
- Implement WebSocket for better performance

---

**Arsitektur ini mengimplementasikan:**
âœ… Client-Server pattern
âœ… Multithreading dengan thread pool
âœ… Request-Response protocol
âœ… Real-time state synchronization
âœ… Graceful error handling
âœ… Clean separation of concerns
