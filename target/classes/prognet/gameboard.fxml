<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.shape.Circle?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.Region?>

<StackPane xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="prognet.controller.GameBoardController" styleClass="root-container" stylesheets="@styles.css">
    <children>
        <!-- Include Decorative Animals -->
        <fx:include source="base.fxml" />

        <!-- Main Content -->
        <VBox alignment="TOP_CENTER" spacing="15" style="-fx-padding: 40 30 40 30;">
            <children>
                <!-- Top Bar -->
                <HBox alignment="CENTER_LEFT" spacing="15" prefWidth="700" maxWidth="700">
                    <children>
                        <!-- Leave Button -->
                        <Button fx:id="leaveBtn" text="â†  Leave" onAction="#onLeave"
                            style="-fx-background-color: white; -fx-text-fill: #666666; -fx-font-size: 14; -fx-background-radius: 10; -fx-cursor: hand; -fx-padding: 8 20 8 20; -fx-border-color: #e0e0e0; -fx-border-width: 1.5; -fx-border-radius: 10;">
                        </Button>

                        <!-- Spacer -->
                        <Region HBox.hgrow="ALWAYS" />

                        <!-- Room Code Badge -->
                        <VBox alignment="TOP_RIGHT" spacing="2">
                            <children>
                                <Label text="Room" style="-fx-font-size: 11; -fx-text-fill: #999999;" />
                                <Label fx:id="roomCodeLabel" text="967104"
                                    style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #8B5CF6;" />
                            </children>
                        </VBox>
                    </children>
                </HBox>

                <!-- Players Section -->
                <HBox spacing="15" alignment="CENTER" prefWidth="700" maxWidth="700">
                    <children>
                        <!-- Player 1 Card -->
                        <VBox fx:id="player1Card" spacing="8" alignment="CENTER"
                            style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 20 25 20 25; -fx-border-color: #10B981; -fx-border-width: 3; -fx-border-radius: 15; -fx-effect: dropshadow(gaussian, rgba(16, 185, 129, 0.3), 15, 0, 0, 5);"
                            prefWidth="340" maxWidth="340">
                            <children>
                                <HBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <!-- Avatar -->
                                        <StackPane>
                                            <Circle radius="22" styleClass="avatar-green" />
                                            <Label text="ðŸŽ®" style="-fx-font-size: 20;" />
                                        </StackPane>

                                        <!-- Player Info -->
                                        <VBox spacing="2">
                                            <children>
                                                <Label fx:id="player1NameLabel" text="Player 1"
                                                    style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #333333;" />
                                                <Label fx:id="player1SubtitleLabel" text="Player 1"
                                                    style="-fx-font-size: 12; -fx-text-fill: #10B981;" />
                                            </children>
                                        </VBox>

                                        <!-- Spacer -->
                                        <Region HBox.hgrow="ALWAYS" />

                                        <!-- Score -->
                                        <VBox spacing="0" alignment="CENTER_RIGHT">
                                            <children>
                                                <Label fx:id="player1ScoreLabel" text="0"
                                                    style="-fx-font-size: 32; -fx-font-weight: bold; -fx-text-fill: #10B981;" />
                                                <Label text="points"
                                                    style="-fx-font-size: 11; -fx-text-fill: #999999;" />
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>

                                <!-- Your turn indicator -->
                                <Label fx:id="player1TurnLabel" text="Your turn!"
                                    style="-fx-font-size: 13; -fx-text-fill: #10B981; -fx-font-weight: bold;"
                                    visible="true" />
                            </children>
                        </VBox>

                        <!-- Player 2 Card -->
                        <VBox fx:id="player2Card" spacing="8" alignment="CENTER"
                            style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 20 25 20 25; -fx-border-color: #e0e0e0; -fx-border-width: 2; -fx-border-radius: 15;"
                            prefWidth="340" maxWidth="340">
                            <children>
                                <HBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <!-- Avatar -->
                                        <StackPane>
                                            <Circle radius="22" styleClass="avatar-blue" />
                                            <Label text="ðŸŽ®" style="-fx-font-size: 20;" />
                                        </StackPane>

                                        <!-- Player Info -->
                                        <VBox spacing="2">
                                            <children>
                                                <Label fx:id="player2NameLabel" text="Player 2"
                                                    style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #333333;" />
                                                <Label fx:id="player2SubtitleLabel" text="Player 2"
                                                    style="-fx-font-size: 12; -fx-text-fill: #3B82F6;" />
                                            </children>
                                        </VBox>

                                        <!-- Spacer -->
                                        <Region HBox.hgrow="ALWAYS" />

                                        <!-- Score -->
                                        <VBox spacing="0" alignment="CENTER_RIGHT">
                                            <children>
                                                <Label fx:id="player2ScoreLabel" text="0"
                                                    style="-fx-font-size: 32; -fx-font-weight: bold; -fx-text-fill: #3B82F6;" />
                                                <Label text="points"
                                                    style="-fx-font-size: 11; -fx-text-fill: #999999;" />
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>

                                <!-- Turn indicator placeholder -->
                                <Label fx:id="player2TurnLabel" text=""
                                    style="-fx-font-size: 13; -fx-text-fill: #3B82F6; -fx-font-weight: bold;"
                                    visible="false" />
                            </children>
                        </VBox>
                    </children>
                </HBox>

                <!-- Turn Indicator Badge -->
                <HBox alignment="CENTER" spacing="8"
                    style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 10 20 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                    <children>
                        <Label text="ðŸŽ¯" style="-fx-font-size: 16;" />
                        <Label fx:id="turnIndicatorLabel" text="Player 1's Turn"
                            style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #8B5CF6;" />
                    </children>
                </HBox>

                <!-- Game Board -->
                <StackPane
                    style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 20, 0, 0, 5);"
                    maxWidth="650" prefWidth="650">
                    <children>
                        <GridPane fx:id="cardGrid" hgap="12" vgap="12" alignment="CENTER">
                            <!-- Cards will be added dynamically -->
                        </GridPane>
                    </children>
                </StackPane>
            </children>
        </VBox>
    </children>
</StackPane>